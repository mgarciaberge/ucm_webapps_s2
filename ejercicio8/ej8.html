<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>Ejercicio 8 - Votaciones en gráfico</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  </head>

  <body>
    <div class="container">
      <h1>Votaciones</h1>
      <!-- *** -->
      <div class="container">
        <button type="button" onclick="vote_socialista()">Socialistas</button>
        <button type="button" onclick="vote_liberales()">Liberales</button>
        <button type="button" onclick="vote_animalistas()">Animalistas</button>
        <button type="button" onclick="vote_centristas()">Centristas</button>
        <button type="button" onclick="vote_ecologistas()">Ecologistas</button>
        <button type="button" onclick="reset()">Reset</button>
      </div>
      <!-- *** -->
      <canvas id="myChartJs" width="700" height="700"></canvas>
    </div>
    <br>
    <br>
    <br>
    <a class="btn btn-danger" href="../index.html">Regresar a la página principal</a>
  </body>
  <script>
    var myChart;

    document.addEventListener("DOMContentLoaded", () => {
      const ctx = document.getElementById('myChartJs').getContext('2d');

     
      const data = {
        labels: ['Socialistas', 'Liberales', 'Animalistas', 'Centristas', 'Ecologistas'],
        datasets: [
          {
            label: 'Votaciones',
            data: [1,1,1,1,1],
            backgroundColor: ['#f66','#4640ff','#ffc640','#7c40ff','#35d030'],
          }
        ]
      };

     
      const config = {
        type: 'doughnut',
        data: data,
        options: {
          responsive: false
        },
      };


      myChart = new Chart(ctx, config);
    });


    function vote_socialista() {
      myChart.data.datasets[0].data[0] = myChart.data.datasets[0].data[0] + 1;
      myChart.update();
    }

    function vote_liberales() {
      myChart.data.datasets[0].data[1] = myChart.data.datasets[0].data[1] + 1;
      myChart.update();
    }

    function vote_animalistas() {
      myChart.data.datasets[0].data[2] = myChart.data.datasets[0].data[2] + 1;
      myChart.update();
    }

    function vote_centristas() {
      myChart.data.datasets[0].data[3] = myChart.data.datasets[0].data[3] + 1;
      myChart.update();
    }

    function vote_ecologistas() {
      myChart.data.datasets[0].data[4] = myChart.data.datasets[0].data[4] + 1;
      myChart.update();
    }

    function reset() {
      myChart.data.datasets[0].data[0] = 0;
      myChart.data.datasets[0].data[1] = 0;
      myChart.data.datasets[0].data[2] = 0;
      myChart.data.datasets[0].data[3] = 0;
      myChart.data.datasets[0].data[4] = 0;

      myChart.update();
    }

  </script>
</html>
